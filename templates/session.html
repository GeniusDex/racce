{{$session := .}}
{{template "header.inc.html" .TrackName}}

<div class="mdl-grid">

<div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col">
  <div class="mdl-card__title mdl-card--table__header">
    <h2 class="mdl-card__title-text mdl-typography--title">Leader Board</h2>
  </div>
  <div class="mdl-card__table">
    {{template "sessionleaderboard.inc.html" .}}
  </div>
</div>

<div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--6-col">
  <div class="mdl-card__title mdl-card--table__header">
    <h2 class="mdl-card__title-text mdl-typography--title">Penalties</h2>
  </div>
  <div class="mdl-card__table">
    <table class="mdl-data-table mdl-js-data-table">
      <thead>
        <tr>
          <th>Car</th>
          <th class="mdl-data-table__cell--non-numeric">Driver</th>
          <th class="mdl-data-table__cell--non-numeric">Violation</th>
          <th>In lap</th>
          <th class="mdl-data-table__cell--non-numeric">Penalty</th>
          <th>Cleared in lap</th>
        </tr>
      </thead>
      <tbody>
{{range .Penalties}}
    {{$car := carInSession .CarId $session}}
    {{$driver := index $car.Drivers .DriverIndex}}
        <tr>
          <td>{{$car.RaceNumber}}</td>
          <td class="mdl-data-table__cell--non-numeric"><a href="{{basePath}}/player/{{$driver.PlayerId}}">{{$driver.FirstName}} {{$driver.LastName}}</a></td>
          <td class="mdl-data-table__cell--non-numeric">{{.Reason}}</td>
          <td>{{.ViolationInLap}}</td>
          <td class="mdl-data-table__cell--non-numeric">{{.Penalty}}</td>
          <td>{{.ClearedInLap}}</td>
        </tr>
{{end}}
      </tbody>
    </table>
  </div>
</div>
<div class="mdl-cell mdl-cell--6-col"></div>

<!--
{{$laps := .Laps}}
{{range .SessionResult.LeaderBoardLines}}
    {{$car := .Car}}
<div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col">
  <div class="mdl-card__title mdl-card--table__header">
    <h2 class="mdl-card__title-text mdl-typography--title">Car {{.Car.RaceNumber}} - {{range $index, $driver := .Car.Drivers}}{{if gt $index 0}}, {{end}}{{.FirstName}} {{.LastName}}{{end}}</h2>
  </div>
  <div class="mdl-card__table">
    <table class="mdl-data-table mdl-js-data-table">
      <thead>
        <tr>
          <th>Lap</th>
          <th class="mdl-data-table__cell--non-numeric">Driver</th>
          <th>Laptime</th>
          <th>Sector 1</th>
          <th>Sector 2</th>
          <th>Sector 3</th>
          <th class="mdl-data-table__cell--non-numeric">Valid</th>
        </tr>
      </thead>
      <tbody>
    {{$lapnr := 0}}
    {{range $lap := $laps}}
        {{if eq .CarId $car.CarId}}
            {{$lapnr = add $lapnr 1}}
        <tr>
          <td>{{$lapnr}}</td>
          <td class="mdl-data-table__cell--non-numeric">{{(index $car.Drivers .DriverIndex).ShortName}}</td>
          <td>{{laptime .Laptime}}</td>
          <td>{{laptime (index .Splits 0)}}</td>
          <td>{{laptime (index .Splits 1)}}</td>
          <td>{{laptime (index .Splits 2)}}</td>
          <td class="mdl-data-table__cell--non-numeric">{{if .IsValidForBest}}true{{else}}false{{end}}</td>
        </tr>
        {{end}}
    {{end}}
      </tbody>
    </table>
  </div>
</div>
{{end}}
-->

</div>

{{template "footer.inc.html"}}
